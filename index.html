<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jamalese Translator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing: border-box; }

:root {
  --bg: #0b0e1a;
  --card: #151a33;
  --text: #f1f3ff;
  --muted: #aab;
  --accent: #7c8cff;
  --border: #2b2f55;
  --transition: 0.35s ease;
}

[data-theme="light"] {
  --bg: #f4f6fb;
  --card: #ffffff;
  --text: #111;
  --muted: #666;
  --border: #ddd;
}

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: background var(--transition), color var(--transition);
}

.container {
  max-width: 1100px;
  margin: 50px auto;
  padding: 20px;
}

.card {
  background: var(--card);
  border-radius: 20px;
  padding: 26px;
  transition: background var(--transition);
}

/* ---------- Header ---------- */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

h1 {
  margin: 0;
  font-size: 28px;
  transition: color var(--transition);
}

/* ---------- Theme Toggle ---------- */
.toggle-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
}

.switch {
  width: 50px;
  height: 26px;
  background: #555;
  border-radius: 20px;
  position: relative;
  cursor: pointer;
}

.switch::after {
  content: "";
  position: absolute;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: var(--transition);
}

[data-theme="light"] .switch::after {
  transform: translateX(24px);
}

/* ---------- Layout ---------- */
.panes {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  position: relative;
}

@media (max-width: 700px) {
  .panes { grid-template-columns: 1fr; }
}

/* ---------- Swap ---------- */
.swap-btn {
  position: absolute;
  top: 42px;
  left: 50%;
  transform: translateX(-50%);
  background: none;
  border: none;
  font-size: 22px;
  cursor: pointer;
  color: var(--muted);
  transition: color var(--transition);
}

@media (max-width: 700px) {
  .swap-btn {
    top: auto;
    bottom: calc(50% + 10px);
  }
}

/* ---------- Language Tabs ---------- */
.lang-tabs {
  position: relative;
  display: flex;
  gap: 18px;
  margin-bottom: 8px;
}

.lang-tab {
  cursor: pointer;
  color: var(--muted);
  padding-bottom: 6px;
}

.lang-tab.active {
  color: var(--text);
}

.underline {
  position: absolute;
  bottom: 0;
  height: 2px;
  background: var(--accent);
  transition: var(--transition);
}

/* ---------- Panels ---------- */
.pane {
  display: flex;
  flex-direction: column;
  height: 260px;
}

textarea {
  flex: 1;
  resize: none;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  padding: 14px;
  font-size: 16px;
  transition: background var(--transition), border var(--transition);
}

.output-box {
  flex: 1;
  border-radius: 14px;
  border: 1px solid var(--border);
  padding: 14px;
  position: relative;
  transition: background var(--transition), border var(--transition);
}

#result {
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 17px;
}

/* ---------- Copy ---------- */
.copy-btn {
  position: absolute;
  bottom: 10px;
  left: 10px;
  border: none;
  background: none;
  cursor: pointer;
  color: var(--muted);
  display: none;
}

.copy-btn.visible { display: block; }

.copy-btn.copied {
  cursor: default;
  color: var(--accent);
}

/* ---------- Footer ---------- */
.footer {
  margin-top: 20px;
  font-size: 13px;
  display: flex;
  justify-content: space-between;
  color: var(--muted);
}

.footer a {
  color: var(--accent);
  text-decoration: none;
}
</style>
</head>

<body>
<div class="container">
<div class="card">

<header>
<h1>Jamalese Translator</h1>
<div class="toggle-wrap">
‚òÄÔ∏è <div class="switch" id="themeSwitch"></div> üåô
</div>
</header>

<div class="panes">

<button class="swap-btn" id="swapBtn">‚áÑ</button>

<div class="pane">
<div class="lang-tabs" id="sourceTabs">
<div class="lang-tab active" data-lang="auto"><span>Auto</span></div>
<div class="lang-tab" data-lang="jam"><span>Zam≈ìlis</span></div>
<div class="lang-tab" data-lang="eng"><span>English</span></div>
<div class="underline"></div>
</div>
<textarea id="input" placeholder="Type text here..."></textarea>
</div>

<div class="pane">
<div class="lang-tabs" id="targetTabs">
<div class="lang-tab active" data-lang="eng"><span>English</span></div>
<div class="lang-tab" data-lang="jam"><span>Zam≈ìlis</span></div>
<div class="underline"></div>
</div>

<div class="output-box">
<div id="result"></div>
<button class="copy-btn" id="copyBtn">üìã Copy</button>
</div>
</div>

</div>

<div class="footer">
<span>
View the full dictionary at
<a href="https://newhs.cc/dict" target="_blank">newhs.cc/dict</a>
</span>
<span>
Created by
<a href="https://github.com/nadfd" target="_blank">nadfd</a>
</span>
</div>

</div>
</div>

<script src="https://newhs.cc/words.js"></script>

<script>
/* ---------- Dictionary ---------- */
const engToJam={}, jamToEng={};
for(const [jam,raw] of dictionary){
const parts=raw.split(",");
const clean=[];
for(let p of parts){
p=p.replace(/\(.*?\)/g,"").trim().toLowerCase();
if(!p)continue;
clean.push(p);
if(!engToJam[p])engToJam[p]=[];
if(!engToJam[p].includes(jam))engToJam[p].push(jam);
}
jamToEng[jam]=clean;
}

/* ---------- Theme ---------- */
const themeSwitch=document.getElementById("themeSwitch");
document.documentElement.dataset.theme=
localStorage.getItem("dark")==="false"?"light":"dark";
themeSwitch.onclick=()=>{
const d=document.documentElement.dataset.theme!=="dark";
document.documentElement.dataset.theme=d?"dark":"light";
localStorage.setItem("dark",d);
};

/* ---------- Tabs ---------- */
function refreshUnderline(c){
const a=c.querySelector(".lang-tab.active span");
const u=c.querySelector(".underline");
u.style.width=a.offsetWidth+"px";
u.style.left=a.offsetLeft+"px";
}

let source="auto", target="eng";

function activate(id,lang){
const c=document.getElementById(id);
c.querySelectorAll(".lang-tab").forEach(t=>{
t.classList.toggle("active",t.dataset.lang===lang);
});
refreshUnderline(c);
}

function setLang(isSource,lang){
if(isSource){
source=lang;
if(source!=="auto" && source===target){
target=source==="eng"?"jam":"eng";
activate("targetTabs",target);
}
}else{
target=lang;
if(source!=="auto" && source===target){
source=target==="eng"?"jam":"eng";
activate("sourceTabs",source);
}
}
translate();
}

document.querySelectorAll(".lang-tabs").forEach(c=>{
c.querySelectorAll(".lang-tab").forEach(t=>{
t.onclick=()=>setLang(c.id==="sourceTabs",t.dataset.lang);
});
refreshUnderline(c);
new ResizeObserver(()=>refreshUnderline(c)).observe(c);
});

/* ---------- Swap ---------- */
document.getElementById("swapBtn").onclick=()=>{
if(source==="auto")return;
[source,target]=[target,source];
activate("sourceTabs",source);
activate("targetTabs",target);
translate();
};

/* ---------- Translate ---------- */
const input=document.getElementById("input");
const result=document.getElementById("result");
const copyBtn=document.getElementById("copyBtn");
const autoSpan=document.querySelector('[data-lang="auto"] span');

function detect(words){
let j=0,e=0;
words.forEach(w=>{if(jamToEng[w])j++;if(engToJam[w])e++;});
return j>=e?"jam":"eng";
}

function translate(){
const txt=input.value.trim();
if(!txt){
result.textContent="";
copyBtn.classList.remove("visible");
autoSpan.textContent="Auto";
refreshUnderline(document.getElementById("sourceTabs"));
return;
}

const words=txt.toLowerCase().split(/\s+/);
const detected=detect(words);

if(source==="auto"){
autoSpan.textContent=(detected==="eng"?"English":"Zam≈ìlis")+" ‚Äì Auto";
refreshUnderline(document.getElementById("sourceTabs"));
}

const dict =
(source==="jam" || (source==="auto" && detected==="jam"))
? jamToEng
: engToJam;

result.textContent=words.map(w=>dict[w]?.[0]||w).join(" ");
copyBtn.classList.add("visible");
}

input.addEventListener("input",translate);

/* ---------- Copy ---------- */
copyBtn.onclick=()=>{
navigator.clipboard.writeText(result.textContent);
copyBtn.textContent="‚úî Copied";
copyBtn.classList.add("copied");
setTimeout(()=>{
copyBtn.textContent="üìã Copy";
copyBtn.classList.remove("copied");
},1200);
};
</script>
</body>
</html>
