<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jamalese Translator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}

:root{
--bg:#f4f6fb;
--card:#fff;
--text:#111;
--muted:#555;
--accent:#4b5cff;
--border:#d6d9ee;
--input:#fff;
}

[data-theme="dark"]{
--bg:#070914;
--card:#151a33;
--text:#f1f3ff;
--muted:#aab;
--accent:#7c8cff;
--border:#2b2f55;
--input:#0e1228;
}

body{
margin:0;
font-family:system-ui,sans-serif;
background:var(--bg);
color:var(--text);
transition:.4s;
}

.container{max-width:1100px;margin:60px auto;padding:20px}
.card{
background:var(--card);
border-radius:20px;
padding:28px;
box-shadow:0 30px 80px rgba(0,0,0,.35);
transition:.4s;
position:relative;
}

header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

h1{margin:0;font-size:28px}

/* ---------- Dark toggle ---------- */
.toggle-wrap{display:flex;align-items:center;gap:8px;font-size:18px}
.switch{
width:52px;height:28px;border-radius:999px;
background:#999;position:relative;cursor:pointer;
transition:.3s;
}
.switch::after{
content:"";width:22px;height:22px;border-radius:50%;
background:white;position:absolute;top:3px;left:3px;
transition:.3s;
}
[data-theme="dark"] .switch{background:var(--accent)}
[data-theme="dark"] .switch::after{transform:translateX(24px)}

/* ---------- Panes ---------- */
.panes{
display:grid;
grid-template-columns:1fr 1fr;
gap:16px;
position:relative;
}

@media(max-width:700px){
.panes{grid-template-columns:1fr}
}

.pane{display:flex;flex-direction:column}

/* ---------- Swap button ---------- */
.swap-btn{
position:absolute;
top:0;
left:50%;
transform:translateX(-50%);
font-size:20px;
cursor:pointer;
background:none;
border:none;
color:var(--muted);
opacity:.7;
transition:.2s;
z-index:5;
}

.swap-btn:hover{
opacity:1;
transform:translateX(-50%) scale(1.1);
}

/* Mobile placement */
@media(max-width:700px){
.swap-btn{
position:static;
transform:none;
margin:6px auto 10px;
}
}

/* ---------- Language tabs ---------- */
.lang-tabs{
position:relative;
display:flex;
gap:20px;
border-bottom:1px solid var(--border);
margin-bottom:8px;
}

/* ONLY shift right language bar on desktop */
@media(min-width:701px){
#targetTabs{padding-left:42px;}
}

.lang-tab{
padding:8px 0;
cursor:pointer;
color:var(--muted);
transition:.25s;
white-space:nowrap;
}

.lang-tab.active{color:var(--accent)}

.underline{
position:absolute;
bottom:-1px;
height:2px;
background:var(--accent);
transition:left .3s,width .3s;
}

/* ---------- Input / Output ---------- */
textarea{
height:260px;
resize:none;
padding:14px;
font-size:16px;
border-radius:14px;
border:1px solid var(--border);
background:var(--input);
color:var(--text);
transition:.4s;
}

.output-box{
position:relative;
height:260px;
padding:14px 14px 54px;
border-radius:14px;
background:rgba(0,0,0,.04);
overflow-y:auto;
font-size:18px;
transition:.4s;
}
[data-theme="dark"] .output-box{background:rgba(255,255,255,.06)}

/* ---------- Copy ---------- */
.copy-btn{
position:absolute;
bottom:10px;
left:10px;
display:flex;
align-items:center;
gap:6px;
padding:6px 10px;
border-radius:10px;
border:1px solid var(--border);
background:var(--input);
cursor:pointer;
font-size:14px;
opacity:0;
pointer-events:none;
transition:.25s;
}
.copy-btn.visible{opacity:1;pointer-events:auto}
.copy-btn.copied{pointer-events:none;color:var(--accent);border-color:var(--accent)}

/* ---------- Footer ---------- */
.footer{
margin-top:22px;
font-size:13px;
color:var(--muted);
display:flex;
justify-content:space-between;
flex-wrap:wrap;
}
.footer a{color:var(--accent);text-decoration:none}
</style>
</head>

<body>
<div class="container">
<div class="card">

<header>
<h1>Jamalese Translator</h1>
<div class="toggle-wrap">
‚òÄÔ∏è <div class="switch" id="themeSwitch"></div> üåô
</div>
</header>

<div class="panes">

<button class="swap-btn" id="swapBtn" title="Swap languages">‚áÑ</button>

<!-- SOURCE -->
<div class="pane">
<div class="lang-tabs" id="sourceTabs">
<div class="lang-tab active" data-lang="auto">Auto</div>
<div class="lang-tab" data-lang="jam">Zam≈ìlis</div>
<div class="lang-tab" data-lang="eng">English</div>
<div class="underline"></div>
</div>
<textarea id="input" placeholder="Type text here..."></textarea>
</div>

<!-- TARGET -->
<div class="pane">
<div class="lang-tabs" id="targetTabs">
<div class="lang-tab active" data-lang="eng">English</div>
<div class="lang-tab" data-lang="jam">Zam≈ìlis</div>
<div class="underline"></div>
</div>
<div class="output-box">
<div id="result"></div>
<button class="copy-btn" id="copyBtn">üìã Copy</button>
</div>
</div>

</div>

<div class="footer">
<span>View the full dictionary at <a href="https://newhs.cc/dict">newhs.cc/dict</a></span>
<span>Created by <a href="https://github.com/nadfd">nadfd</a></span>
</div>

</div>
</div>

<script src="https://newhs.cc/words.js"></script>

<script>
/* ---------- Dictionary ---------- */
const engToJam={}, jamToEng={};
for(const [jam,engRaw] of dictionary){
const parts=engRaw.split(",");
const meanings=[];
for(let p of parts){
p=p.replace(/\s*\(.*?\)\s*/g,"").trim().toLowerCase();
if(!p)continue;
meanings.push(p);
if(!engToJam[p])engToJam[p]=[];
if(!engToJam[p].includes(jam))engToJam[p].push(jam);
}
jamToEng[jam]=meanings;
}

/* ---------- Theme ---------- */
const themeSwitch=document.getElementById("themeSwitch");
document.documentElement.dataset.theme=
localStorage.getItem("dark")==="false"?"light":"dark";
themeSwitch.onclick=()=>{
const d=document.documentElement.dataset.theme!=="dark";
document.documentElement.dataset.theme=d?"dark":"light";
localStorage.setItem("dark",d);
};

/* ---------- Tabs ---------- */
function refreshUnderline(container){
const a=container.querySelector(".lang-tab.active");
const u=container.querySelector(".underline");
u.style.width=a.offsetWidth+"px";
u.style.left=a.offsetLeft+"px";
}

function setupTabs(id,set,isSource){
const c=document.getElementById(id);
const tabs=[...c.querySelectorAll(".lang-tab")];
tabs.forEach(t=>{
t.onclick=()=>{
tabs.forEach(x=>x.classList.remove("active"));
t.classList.add("active");
if(isSource && t.dataset.lang!=="auto"){
document.querySelector('#sourceTabs .lang-tab[data-lang="auto"]').textContent="Auto";
}
set(t.dataset.lang);
refreshUnderline(c);
translate();
};
});
refreshUnderline(c);
new ResizeObserver(()=>refreshUnderline(c)).observe(c);
}

let source="auto", target="eng";
setupTabs("sourceTabs",l=>source=l,true);
setupTabs("targetTabs",l=>target=l,false);

/* ---------- Swap ---------- */
document.getElementById("swapBtn").onclick=()=>{
if(source==="auto")return;
[source,target]=[target,source];
document.querySelector(`#sourceTabs .lang-tab[data-lang="${source}"]`).click();
document.querySelector(`#targetTabs .lang-tab[data-lang="${target}"]`).click();
};

/* ---------- Translate ---------- */
const input=document.getElementById("input");
const result=document.getElementById("result");
const copyBtn=document.getElementById("copyBtn");
const autoTab=document.querySelector('#sourceTabs .lang-tab[data-lang="auto"]');

function detectLanguage(words){
let j=0,e=0;
words.forEach(w=>{if(jamToEng[w])j++;if(engToJam[w])e++});
return j>=e?"jam":"eng";
}

function translate(){
const text=input.value.trim();
if(!text){
result.textContent="";
copyBtn.classList.remove("visible");
autoTab.textContent="Auto";
refreshUnderline(document.getElementById("sourceTabs"));
return;
}

const words=text.toLowerCase().split(/\s+/);
const detected=detectLanguage(words);

if(source==="auto"){
autoTab.textContent=(detected==="eng"?"English":"Zam≈ìlis")+" ‚Äì Auto";
refreshUnderline(document.getElementById("sourceTabs"));
}

const dict=(source==="jam"||(source==="auto"&&detected==="jam"))?jamToEng:engToJam;
result.textContent=words.map(w=>dict[w]?.[0]||w).join(" ");
copyBtn.classList.add("visible");
}

input.addEventListener("input",translate);

/* ---------- Copy ---------- */
copyBtn.onclick=()=>{
navigator.clipboard.writeText(result.textContent);
copyBtn.classList.add("copied");
copyBtn.textContent="‚úî Copied";
setTimeout(()=>{
copyBtn.classList.remove("copied");
copyBtn.textContent="üìã Copy";
},1200);
};
</script>
</body>
</html>
